---
action: 'shop:checkout'
template: default
protocol: all
published: true
name: Checkout
url: /checkout
---
{% if not items.count %}
	<a href="{{ site_url('shop') }}">Your cart is empty! Continue shopping.</a>
{% else %}

	{% if customer or guest == 'true' %}

		{% if step == 'billing_info' %}
			{{ partial('partial-checkout-address') }}
		{% elseif step == 'shipping_method' %}
			{{ partial('partial-checkout-shippingmethod') }}
		{% elseif step == 'pay' %}
			{{ partial('partial-checkout-pay') }}
		{% endif %}

	{% else %}

	<h3>Login</h3>
	{{ open_form({'data-ajax-handler': 'shop:onLogin'}) }}
		<label for="login_email">E-mail Address</label>
		<input type="text" id="login_email" name="email" value="{{ post('email') }}"/>

		<label for="login_password">Password</label>
		<input type="password" name="password" id="login_password" />
		
		<input type="submit" class="button" value="Login"/>
		<a class="right forgotpass" href="{{ site_url('/password-restore') }}">Forgot your password?</a>
		
		<input type="hidden" name="redirect" value="{{ site_url('/checkout') }}"/>
	{{ close_form() }}

	{{ open_form() }}
		<h3>Continue checkout as guest</h3>
		<p>Continue checkout as guest. No sign up required.</p>
		<a class="button" href="{{ site_url('/checkout') }}">Continue as guest</a>
		<input type="hidden" name="guest" value="true"/>
	{{ close_form() }}

	{% endif %}

{% endif %}