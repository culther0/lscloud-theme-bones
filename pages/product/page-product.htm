---
action: 'shop:product'
template: default
protocol: all
published: true
name: Product
url: '/product/:urlName'
---
<!-- open form -->
{{ open_form({'class': 'custom', 'onsubmit': 'return false'}) }}
  {% if product %}
    {% set on_sale = product.onSale %}
    <h2>{{ product.name }}</h2>
    <i>
      {% if on_sale %}
      <span class="oldprice">{{ product.fullPrice|currency }}</span>
      {% endif %}
      {{ product.price|currency }}
    </i>

    <!-- product attributes -->
    {% if product.productAttributes.count %}
      <table class="compact">
        {% for attribute in product.productAttributes %}
          <tr>
            <th>{{ attribute.name }}</th>
            <td>{{ attribute.value }}</td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}

    <!-- product options -->
    {% if product.options.count %}
      <div class="clearfix">
        {% for index, option in product.options %}
          <div class="option">
            <label class="title" for="{{ 'option-'~index }}">{{ option.name }}</label>
            <select id="{{ 'option-'~index }}" name="options[{{ option.id }}]" class="product-option" data-ajax-handler="shop:product" data-ajax-update="#product-page=shop-product">
              {% for key, value in option.values %}
                <option value='{{ key }}' {{ option_state(postedOptions[option.id], key) }}>{{ value }}</option>
              {% endfor %}
            </select>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- product extras -->
    {% if product.extras.count %}
    <h3>Product Extras</h3>
      <div class="clearfix">
        {% for index, extra in product.extras %}
            <div class="extra">
                <label class="title" for="{{ 'extra-'~index }}">{{ extra.name }} ({{ extra.price|currency }})</label>
                {% if extra.enabled %}
                    <input type="checkbox" id="{{ 'extra-'~index }}" {{ checkbox_state(postedExtras[extra.id], extra.id) }} name="extras[{{ extra.id }}]" data-ajax-handler="shop:product" data-ajax-update="#product-page=shop-product">
                {% else %}
                    <input type="checkbox" disabled="disabled">
                {% endif %}
            </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- quantity & add-to-cart -->
    {% if product.enabled %}
      {% if not product.isOutOfStock() or product.allow_preorder %}
        {{ open_form() }}
          <input type="text" value="{{ quantity|default("1") }}" name="quantity"/>
          <input type="hidden" name="productId" value="{{ product.id }}"/>
          <button type="button" class="btn btn-primary btn-large" href="#" id="add_to_cart">
          <i class="icon-plus"></i> &nbsp; Add to cart</button>
        {{ close_form() }}
      {% else %}
        <div class="not-available">
          <p>
          This product is temporarily unavailable.
          {% if product.om('expected_availability_date', posted_options) %}
          <br/>The expected availability date is <strong>{{ product.om('expected_availability_date', posted_options).format('%x') }}</strong>
          {% endif %}
          </p>
        </div>
      {% endif %}
    {% else %}
        <div class="not-available"><p>This product is not available.</p></div>
    {% endif %}

    <!-- picture grid -->
    {% for image in product.images %}
      <img src="{{ image.thumbnail('330', 'auto')|default('http://placehold.it/330x330') }}" >
    {% endfor %}

    <h2>Product Details</h2>
    <p>{{ product.description|unescape }}</p>
    <h2>Ratings goes here</h2>

    <!-- related products -->
    {% if product.related.count %}
    <div class="related-items product-list twelve columns">
      <h3>Related Items</h3>
      <div class="row">
        <ul class="clearfix"> 
        {% for product in product.related %}
          {{ partial('partial-product-grid', {'product':product}) }}
        {% endfor %} 
        </ul>
      </div>
    </div>
    {% endif %}

  {% else %}

  <h2>We are sorry, the requested product was not found.</h2>

  {% endif %}

{{ close_form }}

<hr>
